(this["webpackJsonpeffectnode-3dworld-example"]=this["webpackJsonpeffectnode-3dworld-example"]||[]).push([[0],{43:function(e,t,n){e.exports=n(58)},44:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);n(44);var o=n(5),r=n.n(o),a=n(36),i=n.n(a),c=n(11),l=n(68),s=n(63),u=n(16),v=n(8),f=n(14),d=n.n(f),m=n(19),p=n(2),g=n(1),y=n(10),h=n(0),x=n(66),w=n(37),b=n(64),E=n(65),z=n(67),D=n(38),T=n(39),k=n(17),P=["Now"],S=function(){return"_"+Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9)},j=function e(t){var n=this,o=t.parent,r=void 0!==o&&o;Object(g.a)(this,e),this.parent=r,this.resource=new Map,this.get=function(e){return new Promise((function(t){var o=0;o=setInterval((function(){n.parent?(n.resource.has(e)||n.parent.resource.has(e))&&(clearInterval(o),t(n.resource.get(e)||n.parent.resource.get(e))):n.resource.has(e)&&(clearInterval(o),t(n.resource.get(e)))}))}))},this.set=function(e,t){n.resource.set(e,t)},this.name="ENMini";var a=!1;this.tasks=[],this.resizeTasks=[],this.cleanTasks=[],this.onLoop=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>=0?n.tasks.push(e):n.tasks.unshift(e)},this.onResize=function(e){e(),n.resizeTasks.push(e)},this.onClean=function(e){n.cleanTasks.push(e)};var i=0;window.addEventListener("resize",(function(){clearTimeout(i),i=setTimeout((function(){n.resizeTasks.forEach((function(e){return e()}))}),16.8888)}));var c=!1;this.toggle=function(){c=!c},this.pause=function(){c=!0},this.play=function(){c=!1},this.clean=function(){a=!0;try{n.cleanTasks.forEach((function(e){return e()}))}catch(e){console.error(e)}},this.lastTime=window.performance.now(),this.work=function(){if(n.timeNow=window.performance.now(),a)return{name:n.name,duration:0};if(c)return{name:n.name,duration:0};var e=window.performance.now();try{var t=n.timeNow,o=n.lastTime,r=t-o;n.lastTime=t,t/=1e3,(r/=1e3)>=100&&(r=100),n.tasks.forEach((function(e){return e(t,r)}))}catch(l){console.error(l)}var i=window.performance.now()-e;return{name:n.name,duration:i}},this.ready=new Proxy({},{get:function(e,t){return n.get(t)}}),this.now=new Proxy({},{get:function(e,t){return n.parent?n.resource.get(t)||n.parent.resource.get(t):n.resource.get(t)}})};function O(){var e=Object(c.e)().get,t=Object(o.useState)((function(){return new j({})})),n=Object(y.a)(t,1)[0];return Object(o.useEffect)((function(){return function(){n.clean()}}),[]),Object(c.c)((function(){var t=e();for(var o in t)n.set(o,t[o]);n.work()})),{mini:n}}var M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{passive:!1},r=arguments.length>3?arguments[3]:void 0;Object(o.useEffect)((function(){return(r=r||window).addEventListener(e,t,n),function(){(r=r||window).removeEventListener(e,t)}}),[])},C=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!1};return(e=e||window).addEventListener(t,n,o),function(){(e=e||window).removeEventListener(t,n)}},A=function(){function e(t){var n=t.floor,o=t.scene;Object(g.a)(this,e),this.floor=n,this.center=new h.Vector2(0,0),this.raycaster=new h.Raycaster,this.scene=o;var r=this.makeCollider();this.collider=r,this.preview=r}return Object(p.a)(e,[{key:"makeCollider",value:function(){var e=this.scene,t=this.floor,o=n(53).BufferGeometryUtils,r=n(34).SkeletonUtils.clone(t),a=[];r.updateMatrixWorld(),r.traverse((function(e){if(e.geometry&&!e.userData.isNotFloor){var t=e.geometry.clone();for(var n in t.applyMatrix4(e.matrixWorld),t.attributes)"position"===n||"index"===n||t.deleteAttribute(n);a.push(t)}})),e.traverse((function(e){if(e&&e.userData&&e.userData.isFloor&&e.geometry){var t=e.geometry.clone();for(var n in e.updateMatrixWorld(),t.applyMatrix4(e.matrixWorld),t.attributes)"position"!==n&&t.deleteAttribute(n);a.push(t)}}));var i=o.mergeBufferGeometries(a,!1);i.boundsTree=new x.a(i);var c=new h.Mesh(i,new h.MeshBasicMaterial({color:16777215}));return c.material.wireframe=!0,c.material.opacity=.5,c.material.transparent=!0,c.updateMatrixWorld(),c}},{key:"scanCenter",value:function(e){var t=e.camera,n=e.scene,o=this.raycaster,r=this.center,a=this.collider;o.setFromCamera(r,t);var i=[],c=[];n.traverse((function(e){var t,n,o,r;e.geometry&&(null!==e&&void 0!==e&&null!==(t=e.userData)&&void 0!==t&&t.isHoverable||null!==e&&void 0!==e&&null!==(n=e.userData)&&void 0!==n&&n.isFloor||null!==e&&void 0!==e&&null!==(o=e.userData)&&void 0!==o&&o.tooltip||null!==e&&void 0!==e&&null!==(r=e.userData)&&void 0!==r&&r.website)&&c.push(e)})),o.intersectObjects(c,!1,i),a.geometry.boundsTree.raycastFirst(a,o,o.ray);var l=i[0];return l||!1}}]),e}(),I=function e(t){var o=t.collider,r=t.startAt,a=t.Now;Object(g.a)(this,e),this.collider=o;var i=n(54).RoundedBoxGeometry,c=new h.Mesh(new i(1,2,1,8,1.3),new h.MeshLambertMaterial({transparent:!0,opacity:1}));c.geometry.translate(0,-1.3,0),c.castShadow=!0,c.capsuleInfo={radius:1.3,segment:new h.Line3(new h.Vector3,new h.Vector3(0,-1,0))},this.player=c,c.position.copy(r),c.position.y+=5,c.geometry.computeBoundingBox(),c.collider=(new h.Box3).copy(c.geometry.boundingBox);var l=new h.Vector3,s=new h.Vector3(0,0,0),u=new h.Vector3,v=new h.Vector3,f=new h.Box3,d=new h.Matrix4,m=new h.Line3,p=new h.Object3D;function y(e){var t=e.delta,n=e.player;s.y+=-9.8*t,n.position.addScaledVector(s,t),n.position.y<=-50&&(n.position.copy(r),a.goingTo.copy(r),a.goingTo.z+=1,s.y=0),l.copy(a.goingTo).sub(n.position),l.y=0;var i=l.length();l.normalize(),l.y=0,l.multiplyScalar(a.avatarSpeed),i>=.1?(n.position.addScaledVector(l,.04),a.avatarMode="running"):a.avatarMode="standing",n.updateMatrixWorld();var c=n.capsuleInfo;f.makeEmpty(),d.copy(o.matrixWorld).invert(),m.copy(c.segment),m.start.applyMatrix4(n.matrixWorld).applyMatrix4(d),m.end.applyMatrix4(n.matrixWorld).applyMatrix4(d),f.expandByPoint(m.start),f.expandByPoint(m.end),f.min.addScalar(-c.radius),f.max.addScalar(c.radius),o.geometry.boundsTree.shapecast(o,{intersectsBounds:function(e){return e.intersectsBox(f)},intersectsTriangle:function(e){var t=u,n=v,o=e.closestPointToSegment(m,t,n);if(o<c.radius){var r=c.radius-o,a=n.sub(t).normalize();m.start.addScaledVector(a,r),m.end.addScaledVector(a,r)}}});var g=u;g.copy(m.start).applyMatrix4(o.matrixWorld);var y=v;y.subVectors(g,n.position),n.position.copy(g),a.avatarAt.copy(n.position),p.position.copy(n.position),p.lookAt(a.goingTo.x,n.position.y,a.goingTo.z),a.avatarRot.x=p.rotation.x,a.avatarRot.y=p.rotation.y,a.avatarRot.z=p.rotation.z,y.y>Math.abs(t*s.y*.25)?s.set(0,0,0):(y.normalize(),s.addScaledVector(y,-y.dot(s)))}var x=new h.Clock;this.onSimulate=function(){var e=x.getDelta();e>=1/30&&(e=1/30);for(var t=0;t<4;t++)y({delta:e/4,player:c})}},R=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S(),n={exportJSON:function(){return JSON.parse(JSON.stringify(e))},getNameSpcaeID:function(){return t},onEvent:function(n,o){var r="".concat(t),a=function(){o(e[n])};return window.addEventListener("".concat(r,"-").concat(n),a),function(){window.removeEventListener("".concat(r,"-").concat(n),a)}},makeKeyReactive:function(e){var n=Object(o.useState)(0),r=Object(y.a)(n,2),a=r[0],i=r[1];Object(o.useEffect)((function(){var n="".concat(t),o=function(){i((function(e){return e+1}))};return window.addEventListener("".concat(n,"-").concat(e),o),function(){window.removeEventListener("".concat(n,"-").concat(e),o)}}),[a])},reloadKey:function(e){window.dispatchEvent(new CustomEvent("".concat(t,"-").concat(e),{detail:{}}))}},r=new Proxy(e,{get:function(e,t){return n[t]?n[t]:e[t]},set:function(e,n,o){return e[n]!==o&&(e[n]=o,"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("".concat(t,"-").concat(n),{detail:{}}))),!0}});return r}({moved:0,goingTo:new h.Vector3,camAt:new h.Vector3,avatarAt:new h.Vector3,avatarHead:new h.Vector3,avatarRot:new h.Vector3,avatarFaceLook:new h.Vector3,avatarLoading:!0,avatarMode:"standing",avatarSpeed:1,tooltip:"",keyW:!1,keyA:!1,keyS:!1,keyD:!1,cursorPos:new h.Vector3,cursorNormal:new h.Vector3,cursorType:"hide",hoverData:!1,isDown:!1,camMode:"first",overlay:"",profile:!1,user:!1,reload:[],onlineUID:[]})},_=function(e){var t=e.children,n=e.floor,a=e.startAt,i=Object(c.e)().get,l=O().mini,s=Object(o.useRef)(),u=Object(o.useRef)(),v=Object(o.useRef)();return Object(o.useEffect)((function(){n.traverse((function(e){e.geometry&&(e.userData.isFloor=!0),e.material&&(e.material=e.material.clone())}));var e=s.current=new A({floor:n,scene:i().scene}),t=u.current=R(),o=v.current=new I({collider:e.collider,startAt:a,Now:t});return l.onLoop((function(){var n,r=i(),a=r.camera,c=r.scene,l=e.scanCenter({camera:a,scene:c});(l&&(t.cursorPos.copy(l.point),t.cursorNormal.copy(l.face.normal)),l)?(t.hoverData!==l.object.userData&&(t.hoverData=l.object.userData||null),t.tooltip!==(null===(n=l.object.userData)||void 0===n?void 0:n.tooltip)&&(t.tooltip=l.object.userData.tooltip)):(null!==t.hoverData&&(t.hoverData=null),""!==t.tooltip&&(t.tooltip=""));o.onSimulate()})),function(){l.clean()}}),[]),r.a.createElement("group",null,r.a.createElement("primitive",{object:n}),u.current&&"function"===typeof t&&t({Now:u.current}))};function F(e){var t=e.Now,a=e.startAt,i=e.startLookAt,l=e.avatarSpeed,u=void 0===l?2:l,v=e.higherCamera,f=void 0===v?1.5:v,d=Object(c.e)(),m=d.get,p=d.gl,g=Object(o.useRef)({});return Object(o.useEffect)((function(){t.avatarAt.copy(a),t.goingTo.copy(a)})),M("touchstart",(function(e){e.preventDefault()}),{passive:!1}),M("touchmove",(function(e){e.preventDefault()}),{passive:!1}),M("touchend",(function(e){e.preventDefault()}),{passive:!1}),Object(o.useEffect)((function(){var e=t.camMode;return t.camMode="first",t.avatarSpeed=u,function(){t.avatarSpeed=1,t.camMode=e}})),M("keydown",(function(e){"w"===e.key&&(t.keyW=!0),"a"===e.key&&(t.keyA=!0),"s"===e.key&&(t.keyS=!0),"d"===e.key&&(t.keyD=!0)})),M("keyup",(function(e){"w"===e.key&&(t.keyW=!1),"a"===e.key&&(t.keyA=!1),"s"===e.key&&(t.keyS=!1),"d"===e.key&&(t.keyD=!1)})),Object(o.useEffect)((function(){var e=m().camera;e.near=.1,e.far=1e4,e.fov=45,e.updateProjectionMatrix();var o=new h.Camera,r=new w.a(o,p.domElement);r.enableRotate=!0,r.enablePan=!1,r.enableZoom=!1,r.enableDamping=!0,r.rotateSpeed=.5,o.position.copy(a),r.target.copy(i);var c=document.createElement("div");document.body.appendChild(c),c.style.cssText="\n      position: absolute;\n      bottom: 30px;\n      left: 30px;\n      width: 80px;\n      height: 80px;\n      color: white;\n      user-select: none;\n      z-index: 20;\n    ";var l=document.createElement("div");document.body.appendChild(l),l.style.cssText="\n      position: absolute;\n      bottom: 50px;\n      left: 50px;\n      width: 80px;\n      height: 80px;\n      color: white;\n      user-select: none;\n      z-index: 10;\n      text-align: center;\n      opacity: 0.4;\n    ",l.innerHTML="Walk Around JoyStick";var s=n(55).create({zone:c,color:"white",mode:"static",position:{left:"60px",bottom:"60px"}}),u=new h.Vector3(0,0,0),v=new h.Vector3(0,1,0),d=0,y=!1,x=0;s.on("start move dir plain",(function(e,t){var n,o;null!==t&&void 0!==t&&null!==(n=t.angle)&&void 0!==n&&n.radian&&(x=null===t||void 0===t||null===(o=t.angle)||void 0===o?void 0:o.radian,r.enableRotate=!1,y=!0,clearTimeout(d),d=setTimeout((function(){y=!1}),100))})),s.on("end",(function(){x=0,g.current.endForward=function(){u.multiplyScalar(.8)},r.enableRotate=!0,y=!1}));var b=C(p.domElement.parentElement,"touchend",(function(e){y||(r.enableRotate=!0)}),{passive:!1}),E=C(p.domElement.parentElement,"touchstart",(function(e){y||(r.enableRotate=!0)}),{passive:!1}),z=new h.Vector3(0,0,1),D=.3;return g.current.ctrl2=function(){y&&(u.set(0,0,-1),u.applyAxisAngle(v,r.getAzimuthalAngle()+x-.5*Math.PI||0)),D=t.keyW||t.keyA||t.keyS||t.keyD?h.MathUtils.lerp(D,.3,.1):h.MathUtils.lerp(D,0,.1),t.keyW?(z.set(0,0,-1*D),z.applyEuler(e.rotation),z.y=0,t.avatarAt.add(z).multiplyScalar(1)):t.keyA?(z.set(-1*D,0,0),z.applyEuler(e.rotation),z.y=0,t.avatarAt.add(z).multiplyScalar(1)):t.keyS?(z.set(0,0,1*D),z.applyEuler(e.rotation),z.y=0,t.avatarAt.add(z).multiplyScalar(1)):t.keyD&&(z.set(1*D,0,0),z.applyEuler(e.rotation),z.y=0,t.avatarAt.add(z).multiplyScalar(1)),t.goingTo.copy(t.avatarAt)},g.current.ctrl3=function(){"floor"!==t.cursorType&&(t.cursorType="floor")},g.current.ctrl=function(){r.update(),t.goingTo.add(u),e.position.x=t.avatarAt.x,e.position.y=t.avatarAt.y+f,e.position.z=t.avatarAt.z,e.rotation.copy(o.rotation)},t.enableFloorCursor=!1,function(){t.enableFloorCursor=!0,s.off("start move end dir plain"),s.destroy(),document.body.removeChild(c),c.remove(),l.remove(),b(),E()}}),[]),Object(c.c)((function(){Object.values(g.current).forEach((function(e){return e()}))})),r.a.createElement("group",null,r.a.createElement(s.a,{fov:45,near:.1,far:1e4,position:[0,20,20],"rotation-x":-.25*Math.PI,makeDefault:!0}))}var V=function(){function e(t){var n=t.node,o=t.numberOfScans,r=void 0===o?10:o,a=t.trailSize,i=void 0===a?32:a;Object(g.a)(this,e),this.node=n,this.WIDTH=i,this.HEIGHT=r,this.COUNT=this.WIDTH*this.HEIGHT,this.v3v000=new h.Vector3(0,0,0),this.wait=this.setup({node:n})}return Object(p.a)(e,[{key:"setup",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,o,r,a,i,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node,e.next=3,n.ready.gl;case 3:for(o=e.sent,(this.gpu=new T.a(this.WIDTH,this.HEIGHT,o)).setDataType(h.HalfFloatType),r=this.gpu.createTexture(),a=this.gpu.createTexture(),this.fillPositionTexture(r),this.fillLookupTexture(a),this.positionVariable=this.gpu.addVariable("texturePosition",this.positionShader(),r),this.gpu.setVariableDependencies(this.positionVariable,[this.positionVariable]),this.positionUniforms=this.positionVariable.material.uniforms,this.positionUniforms.lookup={value:a},i=this.HEIGHT,c=0;c<i;c++)this.positionUniforms["mouse"+c]={value:new h.Vector3(0,0,0)};this.positionUniforms.time={value:0},r.wrapS=h.RepeatWrapping,r.wrapT=h.RepeatWrapping,null!==(l=this.gpu.init())&&console.error(l);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"positionShader",value:function(){var e=this;return"\n      ".concat(function(){for(var t="",n=e.HEIGHT,o=0;o<n;o++)t+="\n          uniform vec3 mouse".concat(o.toFixed(0),";\n        ");return t}(),"\n\n      uniform sampler2D lookup;\n      uniform float time;\n\n\t\t\tvoid main()\t{\n        // const float width = resolution.x;\n        // const float height = resolution.y;\n        // float xID = floor(gl_FragCoord.x);\n        // float yID = floor(gl_FragCoord.y);\n\n        vec2 uvCursor = vec2(gl_FragCoord.x, gl_FragCoord.y) / resolution.xy;\n        // vec4 positionHead = texture2D( texturePosition, uvCursor );\n\n        vec4 lookupData = texture2D(lookup, uvCursor);\n        vec2 nextUV = lookupData.xy;\n        float currentIDX = floor(gl_FragCoord.x);\n        float currentLine = floor(gl_FragCoord.y);\n\n        if (floor(currentIDX) == 0.0) {\n          ").concat(function(){for(var t="if (false) {}",n=e.HEIGHT,o=0;o<n;o++)t+="\n          else if (currentLine == ".concat(o.toFixed(0),".0) {\n            gl_FragColor = vec4(mouse").concat(o.toFixed(0),", 1.0);\n          }\n        ");return t}(),"\n        } else {\n          vec3 positionChain = texture2D( texturePosition,nextUV ).xyz;\n          gl_FragColor = vec4(positionChain, 1.0);\n        }\n\n\n\t\t\t}\n    ")}},{key:"fillPositionTexture",value:function(e){for(var t=0,n=e.image.data,o=0;o<this.HEIGHT;o++)for(var r=0;r<this.WIDTH;r++)n[t++]=0,n[t++]=0,n[t++]=0,n[t++]=0;e.needsUpdate=!0}},{key:"fillLookupTexture",value:function(e){for(var t=0,n=e.image.data,o=[],r=0;r<this.HEIGHT;r++)for(var a=0;a<this.WIDTH;a++){var i=o[o.length-1]||[0,0];n[t++]=i[0],n[t++]=i[1],n[t++]=this.WIDTH,n[t++]=this.HEIGHT,o.push([a/this.WIDTH,r/this.HEIGHT])}e.needsUpdate=!0}},{key:"render",value:function(e){var t=this,n=e.trackers;this.positionUniforms.time.value=window.performance.now()/1e3,n.forEach((function(e,n){var o=t.positionUniforms["mouse"+n];o&&o.value&&o.value.copy(e)})),this.gpu.compute()}},{key:"getTextureAfterCompute",value:function(){return{posTexture:this.gpu.getCurrentRenderTarget(this.positionVariable).texture}}}]),e}(),N=function(){function e(t){var n=t.node,o=t.sim,r=t.mounter,a=t.color;Object(g.a)(this,e),this.mounter=r,this.node=n,this.sim=o,this.color=a,this.wait=this.setup({node:n})}return Object(p.a)(e,[{key:"setup",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var n,o,r,a,i,c,l,s,u,v,f,m=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.node,o=this.mounter,r=new H({count:this.sim.HEIGHT,numSides:4,subdivisions:2*this.sim.WIDTH,openEnded:!1}),a=r.geometry,i=r.subdivisions,c=r.count,a.instanceCount=c,l=function(e){var t=e.controlPointsResolution,n=void 0===t?20:t,o=e.lineIdx,r=void 0===o?0:o,a=e.lineCount,i=void 0===a?m.sim.HEIGHT:a,c=e.textureName,l=void 0===c?"CONTROL_POINTS":c;n=Math.floor(n);var s="".concat(Number(n).toFixed(1));return"\n      vec3 pointIDX_".concat(l,"_").concat(r.toFixed(0)," (float index) {\n        vec3 result = vec3(0.0);\n\n        vec4 color = texture2D(").concat(l,",\n          vec2(\n            index / ").concat(n.toFixed(1),",\n            ").concat(r.toFixed(1)," / ").concat(i.toFixed(1),"\n          )\n        );\n\n        result = color.rgb;\n\n        return result;\n      }\n\n      vec3 catmullRom_").concat(l,"_").concat(r," (vec3 p0, vec3 p1, vec3 p2, vec3 p3, float t) {\n          vec3 v0 = (p2 - p0) * 0.5;\n          vec3 v1 = (p3 - p1) * 0.5;\n          float t2 = t * t;\n          float t3 = t * t * t;\n\n          return vec3((2.0 * p1 - 2.0 * p2 + v0 + v1) * t3 + (-3.0 * p1 + 3.0 * p2 - 2.0 * v0 - v1) * t2 + v0 * t + p1);\n      }\n\n      vec3 getPointAt_").concat(r.toFixed(0)," (float t) {\n        bool closed = false;\n        float ll = ").concat(s,";\n        float minusOne = 1.0;\n        if (closed) {\n          minusOne = 0.0;\n        }\n\n        float p = (ll - minusOne) * t;\n        float intPoint = floor(p);\n        float weight = p - intPoint;\n\n        float idx0 = intPoint + -1.0;\n        float idx1 = intPoint +  0.0;\n        float idx2 = intPoint +  1.0;\n        float idx3 = intPoint +  2.0;\n\n        vec3 pt0 = pointIDX_").concat(l,"_").concat(r.toFixed(0),"(idx0);\n        vec3 pt1 = pointIDX_").concat(l,"_").concat(r.toFixed(0),"(idx1);\n        vec3 pt2 = pointIDX_").concat(l,"_").concat(r.toFixed(0),"(idx2);\n        vec3 pt3 = pointIDX_").concat(l,"_").concat(r.toFixed(0),"(idx3);\n\n        vec3 pointoutput = catmullRom_").concat(l,"_").concat(r,"(pt0, pt1, pt2, pt3, weight);\n\n        return pointoutput;\n      }\n      ")},s=function(){for(var e="\n          if (false) {}",t=0;t<m.sim.HEIGHT;t++)e+="\n          else if (lineIDXER == ".concat(t.toFixed(1),") {\n            pt += getPointAt_").concat(t.toFixed(0),"(t);\n          }\n        ");return e},u=function(){for(var e="",t=0;t<m.sim.HEIGHT;t++)e+=l({lineIdx:t,lineCount:m.sim.HEIGHT,controlPointsResolution:i,textureName:"posTexture"})+"\n";return e},v=new h.ShaderMaterial({uniforms:{tailColor:{value:this.color},time:{value:0},matcap:{value:null},posTexture:{value:null}},vertexShader:"\n        // #include <common>\n        #define lengthSegments ".concat(i.toFixed(1),"\n\n        attribute float angle;\n        attribute float newPosition;\n        attribute float tubeInfo;\n\n        // varying vec2 vUv;\n        varying vec3 vNormal;\n        attribute vec4 offset;\n\n        uniform sampler2D posTexture;\n        // uniform sampler2D handTexture;\n\n        uniform float time;\n\n        mat4 rotationX( in float angle ) {\n          return mat4(\t1.0,\t\t0,\t\t\t0,\t\t\t0,\n                  0, \tcos(angle),\t-sin(angle),\t\t0,\n                  0, \tsin(angle),\t cos(angle),\t\t0,\n                  0, \t\t\t0,\t\t\t  0, \t\t1);\n        }\n\n        mat4 rotationY( in float angle ) {\n          return mat4(\tcos(angle),\t\t0,\t\tsin(angle),\t0,\n                      0,\t\t1.0,\t\t\t 0,\t0,\n                  -sin(angle),\t0,\t\tcos(angle),\t0,\n                      0, \t\t0,\t\t\t\t0,\t1);\n        }\n\n        mat4 rotationZ( in float angle ) {\n          return mat4(\tcos(angle),\t\t-sin(angle),\t0,\t0,\n                  sin(angle),\t\tcos(angle),\t\t0,\t0,\n                      0,\t\t\t\t0,\t\t1,\t0,\n                      0,\t\t\t\t0,\t\t0,\t1);\n        }\n\n        mat4 rotationMatrix (vec3 axis, float angle) {\n            axis = normalize(axis);\n            float s = sin(angle);\n            float c = cos(angle);\n            float oc = 1.0 - c;\n\n            return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                        oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                        oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                        0.0,                                0.0,                                0.0,                                1.0);\n        }\n\n        ").concat(u(),"\n\n        vec3 sampleFnc (float t) {\n          vec3 pt = (offset.xyz + 0.5) * 0.0;\n\n          // pt = vec4(vec4(pt, 1.0) * rotationY(t * 0.1 + time * 0.1)).xyz;\n          // if (lineIDXER == 0.0) {\n          //   pt += getPointAt_0(t);\n          // }\n\n          float lineIDXER = offset.w;\n          // pt += getPointAt_0(t);\n\n          ").concat(s(),"\n\n          // pt = getPointAt_2(t);\n\n          return pt;\n        }\n\n        void createTube (float t, vec2 volume, out vec3 pos, out vec3 normal) {\n          // find next sample along curve\n          float nextT = t + (1.0 / lengthSegments);\n\n          // sample the curve in two places\n          vec3 cur = sampleFnc(t);\n          vec3 next = sampleFnc(nextT);\n\n          // compute the Frenet-Serret frame\n          vec3 T = normalize(next - cur);\n          vec3 B = normalize(cross(T, next + cur));\n          vec3 N = -normalize(cross(B, T));\n\n          // extrude outward to create a tube\n          float tubeAngle = angle;\n          float circX = cos(tubeAngle);\n          float circY = sin(tubeAngle);\n\n          // compute position and normal\n          normal.xyz = normalize(B * circX + N * circY);\n          pos.xyz = cur + B * volume.x * circX + N * volume.y * circY;\n        }\n\n        varying float vT;\n        varying vec3 vViewPosition;\n\n        void main (void) {\n          vec3 transformed;\n          vec3 objectNormal;\n\n          float t = tubeInfo + 0.5;\n\n          vT = t;\n\n          vec2 volume = vec2(0.0333, 0.0333);\n          createTube(t, volume, transformed, objectNormal);\n\n          vec3 transformedNormal = normalMatrix * objectNormal;\n          vNormal = normalize(transformedNormal);\n\n          // vUv = uv.yx;\n\n          vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n          gl_Position = projectionMatrix * mvPosition;\n          vViewPosition = -mvPosition.xyz;\n        }\n      "),fragmentShader:"\n        varying float vT;\n        // varying vec2 vUv;\n        varying vec3 vNormal;\n        varying vec3 vViewPosition;\n        // uniform sampler2D matcap;\n        uniform vec3 tailColor;\n        void main (void) {\n\n          // vec3 viewDir = normalize( vViewPosition );\n          // vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n          // vec3 y = cross( viewDir, x );\n          // vec2 uv = vec2( dot( x, vNormal ), dot( y, vNormal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n          // vec4 matcapColor = texture2D( matcap, uv );\n\n          gl_FragColor = vec4(tailColor, (1.0 - vT));\n        }\n      ",transparent:!0,depthTest:!1}),(f=new h.Mesh(a,v)).frustumCulled=!1,f.userData.enableBloom=!0,o.add(f),n.onClean((function(){o.remove(f)})),this.sim.wait.then((function(){n.onLoop((function(){var e=m.sim.getTextureAfterCompute();v.uniforms.posTexture.value=e.posTexture,v.uniforms.time.value=window.performance.now()/1e3}))}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),H=function e(t){Object(g.a)(this,e);var n=t.count,o=void 0===n?20:n,r=t.numSides,a=void 0===r?4:r,i=t.subdivisions,c=void 0===i?50:i,l=t.openEnded,s=void 0===l||l,u=new h.CylinderBufferGeometry(1,1,1,a,c,s),f=new D.a;(f=f.fromBufferGeometry(u)).rotateZ(Math.PI/2);var d=new h.Vector2,m=[],p=[],x=[],w=f.vertices,b=f.faceVertexUvs[0],E=[];f.faces.forEach((function(e,t){var n=e.a,o=e.b,r=e.c,a=[w[n],w[o],w[r]],i=b[t];a.forEach((function(e,t){d.set(e.y,e.z).normalize();var n=Math.atan2(d.y,d.x);p.push(n),m.push(e.x),E.push(e.x,e.y,e.z),x.push(i[t].toArray())}))}));for(var z=new Float32Array(m),T=new Float32Array(p),k=new Float32Array(2*x.length),P=new Float32Array(E),S=0;S<z.length;S++){var j=Object(y.a)(x[S],2),O=j[0],M=j[1];k[2*S+0]=O,k[2*S+1]=M}var C=new h.InstancedBufferGeometry;C.instanceCount=o,C.setAttribute("position",new h.BufferAttribute(P,3)),C.setAttribute("tubeInfo",new h.BufferAttribute(z,1)),C.setAttribute("angle",new h.BufferAttribute(T,1)),C.setAttribute("uv",new h.BufferAttribute(k,2));for(var A=[],I=Math.floor(Math.pow(o,1/3)),R=0,_=0;_<I;_++)for(var F=0;F<I;F++)for(var V=0;V<I;V++)A.push(0,0,0,R),R++;return C.setAttribute("offset",new h.InstancedBufferAttribute(new Float32Array(A),4)),Object(v.a)(Object(v.a)({},t),{},{dataLength:z.length,geometry:C})},B=function e(t){var n=t.mini,o=t.mounter,r=t.cursor,a=t.color,i=void 0===a?new h.Color("#ffffff"):a;Object(g.a)(this,e);var c=n,l=new V({node:c,mounter:o,numberOfScans:8,trailSize:64}),s=new N({node:c,sim:l,mounter:o,color:i});this.display=s;for(var u=[],v=function(e){!function(e){var t=e.update,o=e.setup,a=new h.Object3D;r.add(a),n.onClean((function(){r.remove(a)}));var i=new h.Object3D;a.add(i);var l=new h.Object3D;i.add(l);var s=new h.Vector3,v=new h.Vector3;o({origin:i,orbit:l}),c.onLoop((function(){var e;t({origin:i,orbit:l}),null!==(e=n.now)&&void 0!==e&&e.camera&&a.lookAt(n.now.camera.position),l.getWorldPosition(s),v.lerp(s,.3)})),u.push(v)}({setup:function(t){var n=t.origin;t.orbit;n.rotation.z+=2*Math.PI/7*e},update:function(e){var t=e.origin,n=e.orbit;t.rotation.z+=.1,n.position.x=.85+.85*Math.sin(window.performance.now()/1e3*1)}})},f=0;f<7;f++)v(f);l.wait.then((function(){c.onLoop((function(){l.render({trackers:u})}))}))};function L(e){var t=e.Now,n=e.color,a=O().mini,i=Object(o.useRef)(),l=Object(o.useRef)(new h.Color(n));return Object(o.useEffect)((function(){l.current.set(n)}),[n]),Object(o.useEffect)((function(){var e=i.current;console.log(123),e&&a.ready.scene.then((function(t){return new B({mini:a,cursor:e,mounter:t,color:l.current})}))}),[]),Object(c.c)((function(e,n){if(i.current){var o=i.current;o.position.lerp(t.cursorPos,.4),o.lookAt(e.camera.position)}})),r.a.createElement("group",{ref:i})}var U=function e(t){var o=t.mini;Object(g.a)(this,e);var r=o.now.get,a=new h.Vector2;a.copy({x:r().gl.domElement.width,y:r().gl.domElement.height}),a.multiplyScalar(.75);var i=n(59).EffectComposer,c=n(56).RenderPass,l=n(60).UnrealBloomPass,s=new i(r().gl);o.onResize((function(){s.setPixelRatio(.75*r().gl.getPixelRatio())}));var u=new c(r().scene,r().camera);o.onResize((function(){a.copy({x:r().gl.domElement.width,y:r().gl.domElement.height}),a.multiplyScalar(.75),u.setSize(a.x,a.y)})),s.addPass(u);var v=new l(a,2,1,.1);o.onResize((function(){a.copy({x:r().gl.domElement.width,y:r().gl.domElement.height}),a.multiplyScalar(.75),v.setSize(a.x,a.y)})),s.addPass(v),s.renderToScreen=!1;var f=new h.Color("#000000"),d=new h.Layers;d.disableAll(),d.enable(0);var m=new h.Layers;m.disableAll(),m.enable(1);var p=new h.Layers;p.disableAll(),p.enable(2);var y=function(e){return function(t){t.uniforms.globalDarkening=e;t.fragmentShader="".concat("\n        uniform bool globalDarkening;\n\n      ".trim(),"\n").concat(t.fragmentShader),t.fragmentShader=t.fragmentShader.replace("#include <dithering_fragment>","#include <dithering_fragment>\n".concat("\n        if (globalDarkening) {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n      ".trim()))}},x=new Map,w=function(e){if(!x.has(e.uuid)&&(e.material&&(e.material instanceof h.MeshStandardMaterial||e.material instanceof h.MeshPhongMaterial||e.material instanceof h.MeshBasicMaterial||e.material instanceof h.MeshLambertMaterial||e.material instanceof h.MeshMatcapMaterial||e.material instanceof h.MeshPhysicalMaterial||e.material instanceof h.MeshToonMaterial)&&e.material.onBeforeCompile.toString()!==y.toString())){var t={value:!1};e.userData.globalDarkening=t,x.set(e.uuid,t),e.material.onBeforeCompile=y(t),e.material.needsUpdate=!0}x.has(e.uuid)&&(x.get(e.uuid).value=!0)};this.renderTexture=function(){var e=r().gl;e.shadowMap.enabled=!1,r().scene.traverse((function(e){})),r().scene.traverse((function(e){var t,n,o,r;null!==e&&void 0!==e&&null!==(t=e.userData)&&void 0!==t&&t.discard&&(e.visible=!1),null!==e&&void 0!==e&&null!==(n=e.userData)&&void 0!==n&&n.disableBloom&&(e.visible=!1),e.material&&(null!==e&&void 0!==e&&null!==(o=e.userData)&&void 0!==o&&o.enableDarken?w(e):null!==e&&void 0!==e&&null!==(r=e.userData)&&void 0!==r&&r.enableBloom||!p.test(e.layers)&&m.test(e.layers)||w(e))})),function(){var e=r(),t=e.scene,n=e.clock.getDelta(),o=t.background;t.background=f,s.render(n),t.background=o}(),r().scene.traverse((function(e){var t,n;x.has(e.uuid)&&(x.get(e.uuid).value=!1),null!==e&&void 0!==e&&null!==(t=e.userData)&&void 0!==t&&t.discard&&(e.visible=!0),null!==e&&void 0!==e&&null!==(n=e.userData)&&void 0!==n&&n.disableBloom&&(e.visible=!0)})),e.shadowMap.enabled=!0},this.getTex=function(){return s.readBuffer.texture}},W=function e(t){var n=this,o=t.mini;Object(g.a)(this,e);var r=o.now,a=r.size,i=r.gl,c=r.get,l=new h.Vector2;l.copy({x:a.width,y:a.height}),l.multiplyScalar(i.getPixelRatio()),this.rtt=new h.WebGLRenderTarget(l.width,l.height,{encoding:h.sRGBEncoding,generateMipmaps:!1}),o.onClean((function(){n.rtt.dispose()})),o.onResize((function(){l.copy({x:c().gl.domElement.width,y:c().gl.domElement.height}),l.multiplyScalar(i.getPixelRatio()),n.rtt=new h.WebGLRenderTarget(l.width,l.height,{encoding:h.sRGBEncoding,generateMipmaps:!1})})),this.renderTexture=function(){var e=c(),t=e.gl,o=e.camera,r=e.scene,a=t.getRenderTarget();t.setRenderTarget(n.rtt),t.render(r,o),t.setRenderTarget(a)},this.getTex=function(){return n.rtt.texture}},G=function e(t){var n=t.mini;Object(g.a)(this,e);var o=new h.ShaderMaterial({uniforms:{bloomDiffuse:{value:null},baseDiffuse:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main (void) {\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          vUv = uv;\n        }\n      ",fragmentShader:"\n        uniform sampler2D baseDiffuse;\n        uniform sampler2D bloomDiffuse;\n\n        varying vec2 vUv;\n          void main (void) {\n            vec4 baseDiffuseColor = texture2D(baseDiffuse, vUv);\n            vec4 bloomDiffuseColor = texture2D(bloomDiffuse, vUv);\n\n            gl_FragColor = vec4(baseDiffuseColor.rgb * 1.0,  baseDiffuseColor.a);\n\n            gl_FragColor.r += 0.45 * pow(bloomDiffuseColor.r, 0.75);\n            gl_FragColor.g += 0.45 * pow(bloomDiffuseColor.g, 0.75);\n            gl_FragColor.b += 0.45 * pow(bloomDiffuseColor.b, 0.75);\n          }\n        "}),r=new k.a(o);this.render=function(e){var t=e.baseTex,a=e.bloomTex,i=n.now.gl;i&&(o.uniforms.bloomDiffuse.value=a,o.uniforms.baseDiffuse.value=t,r.render(i))}};function X(){var e=O().mini,t=Object(o.useRef)((function(){}));return Object(o.useEffect)((function(){e.ready.get.then((function(){var n=new W({mini:e}),o=new U({mini:e}),r=new G({mini:e});t.current=function(){n.renderTexture(),o.renderTexture(),r.render({baseTex:n.getTex(),bloomTex:o.getTex()})}}))}),[]),Object(c.c)((function(){t.current()}),1e3),null}function J(){var e={vertexShader:"\n    varying vec3 vPos;\n    varying vec3 vUv3;\n\n    void main() {\n      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n      gl_Position = projectionMatrix * mvPosition;\n      vPos = position;\n      vUv3 = uv.xyx;\n    }\n    ",fragmentShader:"\n      precision highp float;\n\n      vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\n      vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n      vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\n      float cnoise(vec3 P){\n        vec3 Pi0 = floor(P); // Integer part for indexing\n        vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n        Pi0 = mod(Pi0, 289.0);\n        Pi1 = mod(Pi1, 289.0);\n        vec3 Pf0 = fract(P); // Fractional part for interpolation\n        vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n        vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n        vec4 iy = vec4(Pi0.yy, Pi1.yy);\n        vec4 iz0 = Pi0.zzzz;\n        vec4 iz1 = Pi1.zzzz;\n\n        vec4 ixy = permute(permute(ix) + iy);\n        vec4 ixy0 = permute(ixy + iz0);\n        vec4 ixy1 = permute(ixy + iz1);\n\n        vec4 gx0 = ixy0 / 7.0;\n        vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n        gx0 = fract(gx0);\n        vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n        vec4 sz0 = step(gz0, vec4(0.0));\n        gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n        gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n        vec4 gx1 = ixy1 / 7.0;\n        vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n        gx1 = fract(gx1);\n        vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n        vec4 sz1 = step(gz1, vec4(0.0));\n        gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n        gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n        vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n        vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n        vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n        vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n        vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n        vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n        vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n        vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n        vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n        g000 *= norm0.x;\n        g010 *= norm0.y;\n        g100 *= norm0.z;\n        g110 *= norm0.w;\n        vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n        g001 *= norm1.x;\n        g011 *= norm1.y;\n        g101 *= norm1.z;\n        g111 *= norm1.w;\n\n        float n000 = dot(g000, Pf0);\n        float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n        float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n        float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n        float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n        float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n        float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n        float n111 = dot(g111, Pf1);\n\n        vec3 fade_xyz = fade(Pf0);\n        vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n        vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n        float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n        return 2.2 * n_xyz;\n      }\n\n      varying vec3 vPos;\n      uniform float time;\n      varying vec3 vUv3;\n\n      void main() {\n        float speed = time / 3.5;\n        vec3 pp = vUv3.xyx * 600.0;\n        // pp = vPos * 0.25 + speed;\n        float noise = clamp(cnoise(speed + pp / 250.0 + 0.0 ), 0.0, 1.0);\n\n        vec3 colorA = vec3(81.0, 135.0, 228.0) * 0.2 / 255.0;\n        vec3 colorB = vec3(0.0, 150.0, 136.0) * 0.2 / 255.0;\n\n        vec4 backgroundColor = vec4(mix(colorA, colorB, noise), 1.0);\n\n        gl_FragColor = backgroundColor;\n\n        float starNoise = (noise) * pow(cnoise(speed + pp * 2.0) * 0.5 + 0.5, 15.5) * 30.0;\n\n        gl_FragColor.rgb += vec3(pow(starNoise, 1.3)) * 1.5;\n      }\n      "},t=Object(o.useRef)();Object(o.useEffect)((function(){t.current&&(t.current.needsUpdate=!0)}),[e,e.fragmentShader,e.vertexShader]);var n=Object(o.useRef)({time:{value:0}});return Object(c.c)((function(){n.current.time.value+=1/60})),r.a.createElement(b.a,{frustumCulled:!1,userData:{enableBloom:!0},scale:1,args:[800,20,20]},r.a.createElement("shaderMaterial",{ref:t,uniforms:n.current,fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,side:h.DoubleSide}))}function Y(e){var t=e.imageURL,n=Object(c.e)(),r=n.scene,a=n.gl,i=Object(E.a)(t);return Object(o.useEffect)((function(){var e=new h.PMREMGenerator(a);e.compileEquirectangularShader();var t=e.fromEquirectangular(i).texture;return t.encoding=h.sRGBEncoding,r.environment=t,function(){r.environment=null,r.background=null}}),[]),null}function q(e){var t,n=e.Now,o=Object(u.a)(e,P);n.makeKeyReactive("tooltip");var a=Object(c.e)().camera;return Object(c.b)(r.a.createElement("group",{position:[.03,-.03,-3]},r.a.createElement(z.a,Object.assign({anchorX:"left",anchorY:"top",userData:{disableBloom:!0},outlineWidth:.005,fontSize:.04},o),null!==(t=n.hoverData)&&void 0!==t&&t.website?"Click to open:\n":""," ",n.tooltip||"")),a)}function K(e){var t=e.Now;return r.a.createElement("group",null,r.a.createElement(Z,{Now:t}),r.a.createElement(Q,{Now:t}),r.a.createElement($,null))}function Z(e){e.Now;var t=Object(o.useRef)(),n=Object(o.useRef)();return Object(o.useEffect)((function(){}),[]),Object(c.c)((function(e){var n=e.camera;t.current&&(t.current.position.copy(n.position),t.current.rotation.copy(n.rotation))})),r.a.createElement("group",null,r.a.createElement("group",{ref:t},r.a.createElement("group",{ref:n,scale:[1,1,1],position:[0,0,-1]},r.a.createElement(z.a,{fontSize:.01,outlineColor:"black",outlineWidth:.001,color:"white"},"+"))))}function Q(e){var t=e.Now,n=Object(c.e)().gl,o=0,r=!1;return M("pointerdown",(function(){r=!0,o=0}),{passive:!1},n.domElement),M("pointerup",(function(){r=!1}),{passive:!1},n.domElement),M("pointermove",(function(){r&&o++}),{passive:!1},n.domElement),M("pointerup",(function(){var e;if(t&&o<=10&&(null!==t&&void 0!==t&&null!==(e=t.hoverData)&&void 0!==e&&e.website)){var n=document.createElement("a");n.href=t.hoverData.website,n.target="_blank",n.click()}}),{passive:!1},n.domElement),null}function $(){return M("pointerdown",(function(){document.body.style.cursor="grabbing"}),{passive:!1},document.body),M("pointerup",(function(){document.body.style.cursor="grab"}),{passive:!1},document.body),Object(o.useEffect)((function(){return document.body.style.cursor="grab",function(){document.body.style.cursor=""}}),[]),null}var ee=n(34),te="https://wonglok.github.io/effectnode-3dworld/";function ne(){var e=Object(l.a)("".concat(te,"map/demo-map-000.glb")),t=Object(o.useMemo)((function(){var t=ee.SkeletonUtils.clone(e.scene),n=new h.Vector3(0,0,0),o=new h.Vector3(0,0,0);return t.traverse((function(e){var t,r;e&&((null===e||void 0===e||null===(t=e.userData)||void 0===t?void 0:t.startAt)&&e.getWorldPosition(n),(null===e||void 0===e||null===(r=e.userData)||void 0===r?void 0:r.startLookAt)&&e.getWorldPosition(o))})),{floor:t,startAt:n,startLookAt:o}}),[e]),n=t.floor,a=t.startAt,i=t.startLookAt;return r.a.createElement("group",null,r.a.createElement(X,null),n&&r.a.createElement(_,{floor:n,startLookAt:i,startAt:a},(function(e){var t=e.Now;return r.a.createElement("group",null,r.a.createElement(L,{Now:t,color:"#ffff00"}),r.a.createElement(F,{higherCamera:1.5,avatarSpeed:2,Now:t,startAt:a,startLookAt:i}),r.a.createElement(q,{Now:t}),r.a.createElement(K,{Now:t}),r.a.createElement("primitive",{object:n}))})),r.a.createElement("directionalLight",{position:[10,10,10]}),r.a.createElement(Y,{imageURL:"".concat(te,"image/sky.png")}),r.a.createElement(J,null))}function oe(){return r.a.createElement("group",null,r.a.createElement("group",{"rotation-x":0*Math.PI},r.a.createElement("gridHelper",{args:[150,50,2302755,12237498]})),r.a.createElement(s.a,{position:[0,30,30],"rotation-x":-.25*Math.PI,makeDefault:!0}))}var re=function(){return r.a.createElement(c.a,{dpr:[0,1.5],style:{width:"100%",height:"100%"}},r.a.createElement(o.Suspense,{fallback:r.a.createElement(oe,null)},r.a.createElement(ne,null)))};i.a.render(r.a.createElement(re,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c3f325c9.chunk.js.map